{
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug NestJS App",
      "program": "${workspaceFolder}/node_modules/@nestjs/cli/bin/nest.js",
      "args": ["start", "${input:appName}", "--debug", "--watch"],
      "restart": true,
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug All NestJS Apps",
      "program": "${workspaceFolder}/node_modules/.bin/concurrently",
      "args": [
        "nest start --debug --watch --preserveWatchOutput ar-app",
        "nest start --debug --watch --preserveWatchOutput cart-app",
        "nest start --debug --watch --preserveWatchOutput gateway",
        "nest start --debug --watch --preserveWatchOutput order-app",
        "nest start --debug --watch --preserveWatchOutput payment-app",
        "nest start --debug --watch --preserveWatchOutput product-app",
        "nest start --debug --watch --preserveWatchOutput report-app",
        "nest start --debug --watch --preserveWatchOutput user-app"
      ],
      "restart": true,
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Unit Tests",
      "runtimeArgs": [
        "--inspect-brk",
        "-r",
        "tsconfig-paths/register",
        "-r",
        "ts-node/register"
      ],
      "args": [
        "node_modules/.bin/jest",
        "--runInBand",
        "--config",
        "./jest.unit.js"
      ],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug E2E Tests",
      "runtimeArgs": [
        "--inspect-brk",
        "-r",
        "tsconfig-paths/register",
        "-r",
        "ts-node/register"
      ],
      "args": [
        "node_modules/.bin/jest",
        "--runInBand",
        "--config",
        "./jest.e2e.js"
      ],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "envFile": "${workspaceFolder}/.env.test"
    }
  ],
  "inputs": [
    {
      "type": "pickString",
      "id": "appName",
      "description": "Select the NestJS app to debug",
      "options": [
        "ar-app",
        "cart-app",
        "gateway",
        "order-app",
        "payment-app",
        "product-app",
        "report-app",
        "user-app"
      ]
    }
  ]
}
